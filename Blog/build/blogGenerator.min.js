/*! tgbowman.github.io 2017-11-02 */

function blogObjectFactory(e,t,l,n,...o){return Object.create(null,{id:{enumerable:!0,value:null===n?articleUUIDGen.next().value:n},title:{enumerable:!0,value:e},author:{enumerable:!0,value:t},entry:{enumerable:!0,value:l},published:{enumerable:!0,value:Date.now()}})}function getStorage(){blogArchive.length>0&&(blogArchive=JSON.parse(localStorage.getItem("BlogArchive")),printBlogs())}function printBlogs(){let e=document.getElementById("blogs");blogArchive.sort((e,t)=>t.id-e.id),blogArchive.forEach(function(t){e.innerHTML+=`\n            <article class="blog__article white-bg hidden">\n                <h1>${t.title}</h1>\n                <h2>by: ${t.author}</h2>\n                <p>${t.entry}</p>\n            </article>\n    \n            `})}function setStorage(){const e=JSON.stringify(blogArchive);localStorage.setItem("BlogArchive",e),blogArchive=JSON.parse(localStorage.getItem("BlogArchive"))}function createNewBlog(){let e=document.getElementById("blogTitle").value,t=document.getElementById("blogAuthor").value,l=document.getElementById("blogEntry").value,n=document.getElementById("blogTags").value;if(editMode){const o=blogArchive.findIndex(e=>e.id===currentArticle.id);blogArchive[o]=blogObjectFactory(e,t,l,currentArticle.id,n),editMode=!1}else{let o=blogObjectFactory(e,t,l,blogId,n);blogArchive.push(o)}listArticleTitles(),setStorage()}function showForm(){form.style.display="block"}function hideForm(){form.style.display="none"}const createBlogButton=document.getElementById("createBlog"),blogCancelButton=document.getElementById("cancelForm"),showFormButton=document.getElementById("showBlogForm"),form=document.getElementById("form");let editMode=!1,currentArticle=null,blogArchive=JSON.parse(localStorage.getItem("BlogArchive"))||[];const idGenerator=function*(e){let t=1;for(;;)yield e+t,t++},lastId=blogArchive[blogArchive.length-1]||{id:0},articleUUIDGen=function*(e){let t=1;for(;;)yield e+t,t++}(lastId.id),listArticleTitles=()=>{let e=document.getElementById("blogEdit"),t="";blogArchive.forEach(e=>{t+=`\n            <article id=${e.id}>\n            <span class="${e.title}">${e.title}</span>\n            <button id="editArticle-${e.id}">Edit</button>\n            </article>\n            `}),e.innerHTML=t};document.getElementById("blogEdit").addEventListener("click",e=>{e.target.id.startsWith("editArticle-")&&(currentArticle=blogArchive.find(t=>t.id===parseInt(e.target.id.split("-")[1]))),document.getElementById("blogTitle").value=currentArticle.title,document.getElementById("blogAuthor").value=currentArticle.author,document.getElementById("blogEntry").value=currentArticle.entry,document.getElementById("blogTags").value=currentArticle.tags,editMode=!0}),listArticleTitles(),showFormButton.addEventListener("click",showForm),blogCancelButton.addEventListener("click",hideForm),createBlogButton.addEventListener("click",createNewBlog);